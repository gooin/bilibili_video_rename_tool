---
# bilibili UWP 下载视频重命名工具（Powershell）
app.ps1文件说明：
[参照我的博客](https://blog.51cto.com/3chou/2735401)
单独下载`app.ps1`文件，修改其中的“$root_path”的值为B站视频实际缓存的路径，修改后保存。

## Powershell 版本优点：
**不需要下载Python环境，只需要使用Windows系统自带的PowerShell即可**

## 运行

### 下载`app.ps1`
下载`app.ps1`文件，修改其中的“$root_path”的值为B站视频实际缓存的路径，修改后保存。
### 设置PowerShell执行策略
Windows 10默认禁止PowerShell脚本运行，需要以管理员身份打开PowerShell,执行以下命令修改PowerShell脚本执行策略。
```
PS E:\bilibili_video_rename_tool-master>  Set-ExecutionPolicy RemoteSigned -Force
PS E:\bilibili_video_rename_tool-master>
```
### 执行 `app.ps1`
```
PS E:\bilibili_video_rename_tool-master> .\app.ps1
------------------------------------------------------
进入根目录：
------------------------------------------------------
获取课程文件夹信息
------------------------------------------------------
获取课程文件夹信息成功
------------------------------------------------------
新建课程文件夹信息
------------------------------------------------------


    目录: F:\Bilibili_Cache\200857352


Mode                 LastWriteTime         Length Name
----                 -------------         ------ ----
d-----         2021/4/26     20:19                Windows Server 2019 基础教程
------------------------------------------------------
处理课程目录
------------------------------------------------------
进入子目录 F:\Bilibili_Cache\200857352\1
当前子目录中的视频名称为： F:\Bilibili_Cache\200857352\1\200857352_1_0.mp4
进入子目录 F:\Bilibili_Cache\200857352\10
当前子目录中的视频名称为： F:\Bilibili_Cache\200857352\10\200857352_10_0.mp4
进入子目录 F:\Bilibili_Cache\200857352\2
当前子目录中的视频名称为： F:\Bilibili_Cache\200857352\2\200857352_2_0.mp4
进入子目录 F:\Bilibili_Cache\200857352\3
当前子目录中的视频名称为： F:\Bilibili_Cache\200857352\3\200857352_3_0.mp4
进入子目录 F:\Bilibili_Cache\200857352\4
当前子目录中的视频名称为： F:\Bilibili_Cache\200857352\4\200857352_4_0.mp4
进入子目录 F:\Bilibili_Cache\200857352\5
当前子目录中的视频名称为： F:\Bilibili_Cache\200857352\5\200857352_5_0.mp4
进入子目录 F:\Bilibili_Cache\200857352\6
当前子目录中的视频名称为： F:\Bilibili_Cache\200857352\6\200857352_6_0.mp4
进入子目录 F:\Bilibili_Cache\200857352\7
当前子目录中的视频名称为： F:\Bilibili_Cache\200857352\7\200857352_7_0.mp4
进入子目录 F:\Bilibili_Cache\200857352\8
当前子目录中的视频名称为： F:\Bilibili_Cache\200857352\8\200857352_8_0.mp4
进入子目录 F:\Bilibili_Cache\200857352\9
当前子目录中的视频名称为： F:\Bilibili_Cache\200857352\9\200857352_9_0.mp4
处理结束：
------------------------------------------------------
```


---
分割线
---
# bilibili UWP 下载视频重命名工具（Python）

 - 在 Win10商店中下载【哔哩哔哩动画】

 - 登录后找到视频，点击下载，如图：
   
![](./img/1.png)

 - 格式选`MP4`,**勾选自动合并** （迫于C盘空间不足，截图选了最低码率，自己下载可以选高一点的）
 
![](./img/2.png)

 - 等待下载完成，目录结构如下图
    
![](./img/3.png)

![](./img/4.png)

 - 分析一下文件结构，看到 `.dvi` 文件、分p目录下的`.info`文件，打开看看，其实就是个`json` 文件，包含视频系列的标题、描述等信息
    
![](./img/5.png)
    
   - 思路有了：
     1. 读取`.dvi` 文件，拿到视频系列标题
     2. 读取`.info`文件,为分p的mp4改名
     3. 整合进新的文件夹
   刚好在学习python，
  ## 用法：
 
   打开`init.py`, 修改成你的下载路径, 然后运行即可(python3)（刚开始学py，代码很烂，大佬勿喷）
   
![](./img/8.png)
   
  对于分P很多的视频，用代码重命名还是很方便的~ 接下来就可以用自己喜欢的离线播放器观看了~ 

![](./img/6.png)


![](./img/7.png)


## 注意事项
   
   - 目录记得写成截图上那样，有双斜杠
   - 注意C盘的可用空间，哔哩哔哩客户端默认下载目录在C盘


## reference
https://www.bilibili.com/read/cv1422476/
